\section{Reading Information About the CPU}
\label{app:cpuinfo}
% https://stackoverflow.com/q/7281699
% https://unix.stackexchange.com/q/167038
% https://superuser.com/q/55776
There are many ways to display information about the processor(s) the operating system is
running on.  Among others, the \mintinline{text}{lscpu(1)} and
\mintinline{text}{getconf(1)} programs and the \mintinline{text}{/proc/cpuinfo}
pseudo-file on Linux.  This is \alts{how I checked, what I used to check} my CPU's cache
line sizes, for example:
\begin{minted}[gobble=3]{bash}
   $ getconf LEVEL1_DCACHE_LINESIZE; getconf LEVEL2_CACHE_LINESIZE
   64
   64
\end{minted}
%stopzone

% Performance Analysis
% Run Time Analysis
% Timing Methodology
% Profiling Methodology
% Profiling Pitfalls
% Run Time Measuring
% Benchmarking Methodology
% Monitoring
\section{Profiling Methodology}
% https://en.wikipedia.org/wiki/Profiling_(computer_programming)
% https://en.wikipedia.org/wiki/Processor_affinity
% On `/usr/bin/time` for benchmarks: <http://stackoverflow.com/q/9006596>.
% Andrei Alexandrescu - Writing Fast Code: <https://youtu.be/vrfYLlR8X8k>.
Plenty of things can go wrong when measuring \alts{execution, run} times.
\begin{itemize}
   \item CPU frequency scaling and boosting
      % Not a problem when measuring cycles.
   \item Interrupts
      % Taking the minimum helps.
   \item CPU jumping
      % See <https://youtu.be/vrfYLlR8X8k?t=33m34s>.
   \item Context switches
   \item Warmth of cache
      % See <https://youtu.be/vrfYLlR8X8k?t=41m00s>.
   % \item ...
\end{itemize}
Some effects will \alts{add noise to, pollute} the results or render them irreproducible,
others will invalidate them completely.

\begin{comment}
\section{Disabling the Prefetcher}
My initial results from from running \cref{lst:array-sum} were quite different.  See TODO.

TODO: I installed \texttt{msr-tools} and OProfile.
% This seems to work.  It did affect performance.
\begin{minted}[gobble=3]{bash}
   $ sudo modprobe msr
   $ sudo rdmsr -a 0xC0011022
   600001800000000
   600001800000000
   $ sudo wrmsr -a 0xC0011022 0x600001800002000
   $ sudo rdmsr -a -f '13:13' 0xC0011022
   1
   1
   $ sudo rdmsr -a 0xC0011022
   600001800002000
   600001800002000
\end{minted}
%stopzone
I think resetting the MSR to enable hardware prefetches doesn't work.  To get the same
benchmmark results as before tweaking it, I have to reboot.
\end{comment}

% vim: tw=90 sts=-1 sw=3 et fdm=marker
